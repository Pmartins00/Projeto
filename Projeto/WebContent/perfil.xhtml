<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


<h:body>

	<ui:composition template="/WEB-INF/templates/_template.xhtml">

		<ui:define name="titulo">CoAutores - Perfil</ui:define>

		<ui:define name="corpo">
		<p:outputPanel rendered="#{loginBean.logado}">
		
			<div class="col-md-4">

				<div class="panel-interno">
					
					<p:panelGrid id="panel-dados" styleClass="panel-geral" columns="2" rules="groups"
						columnClasses="pr30, pr70" align="center">

						<p:outputLabel styleClass="t" value="Meus Dados" />
						<p:commandButton value="Editar Dados" type="button" onclick="PF('editar_user').show();" />

						<p:graphicImage title="#{loginBean.usuario.imagem}" name="#{loginBean.usuario.imagem}" library="imagens/usuarios" width="100" height="100" />
						<p:commandButton value="Editar Imagem" type="button" onclick="PF('editar_imagem').show();" />
						
						<p:outputLabel value="Login" />
						<p:outputLabel value="#{loginBean.usuario.login}" />
						
						<p:outputLabel value="Nome" />
						<p:outputLabel value="#{loginBean.usuario.nome}" />

						<p:outputLabel value="E-mail" />
						<p:outputLabel value="#{loginBean.usuario.email}" />

						<p:outputLabel value="Data Nascimento:" />
						<p:outputLabel value="#{loginBean.usuario.dataNascimento.time}" >
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</p:outputLabel>

						<p:outputLabel value="Celular" />
						<p:outputLabel value="#{loginBean.usuario.celular}" />

					</p:panelGrid>

				</div>

			</div>

			<div class="col-md-8">

				<div class="panel-interno">

					<h:form>

						<p:accordionPanel>
							<p:tab title="Meus Textos">
								<p:outputLabel styleClass="lbl">
									<a class="btn btn01" href="novo-texto.xhtml">Novo Texto</a>
								</p:outputLabel>
								<h:panelGrid styleClass="panel-geral" columns="4" cellpadding="10">
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
								</h:panelGrid>
							</p:tab>
							<p:tab title="Temas Favoritos">
								<p:outputLabel styleClass="lbl">
									<a class="btn btn01" href="sugestao.xhtml">Sugerir Tema</a>
								</p:outputLabel>
								<h:panelGrid styleClass="panel-geral" columns="4" cellpadding="10">
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
								</h:panelGrid>
							</p:tab>
							<p:tab title="E-books Favoritos">
								<p:outputLabel styleClass="lbl">
									<a class="btn btn01" href="novo-ebook.xhtml">Novo E-book</a>
								</p:outputLabel>
								<h:panelGrid styleClass="panel-geral" columns="4" cellpadding="10">
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
									<p:graphicImage name="img1.jpg" library="imagens" width="125" height="150" />
								</h:panelGrid>
							</p:tab>
						</p:accordionPanel>

					</h:form>

				</div>

			</div>
			
			<!-- Modal Editar -->
			<p:dialog resizable="false" header="Editar Usuário" widgetVar="editar_user" modal="true" width="800" height="330">
			   <h:form id="manter_cadastro" enctype="multipart/form-data" styleClass="">
			   
					<p:growl id="growl" showDetail="true" sticky="false" />
					<h:panelGrid styleClass="panel-geral" columns="2" rules="groups" columnClasses="pr20, pr80" align="center">
						
						<p:outputLabel value="Nome:" for="nome"/>
						<p:inputText requiredMessage="Nome Obrigatório!" required="true" value="#{loginBean.usuario.nome}" id="nome"/> 
						
						<p:outputLabel value="E-mail" for="email"/>
						<p:inputText validatorMessage="E-mail Inválido" requiredMessage="E-mail Obrigatório!" required="true" value="#{loginBean.usuario.email}" type="email" id="email"> 
							<f:validateRegex pattern="^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$"></f:validateRegex>
						</p:inputText>
						
						<p:outputLabel value="Login:" for="login_cadastro"/>
						<p:inputText requiredMessage="Login Obrigatório!" required="true" value="#{loginBean.usuario.login}" id="login_cadastro"/>
							
						<p:outputLabel value="Senha:" for="senha_cadastro"/>
						<p:inputText validatorMessage="Senha do usuário deve conter no minimo 5 caracteres!" requiredMessage="Senha Obrigatório!" required="true" value="#{cadastroBean.senha}" type="password" id="senha_cadastro">
							<f:validateLength minimum="5"/>
						</p:inputText>
						
						<p:outputLabel value="Nova Senha:" for="nova_senha_cadastro"/>
						<p:inputText value="#{cadastroBean.nova_senha}" type="password" id="nova_senha_cadastro" placeholder="Digite uma senha válida para alteração!"/>
						
						<p:outputLabel value="Data Nascimento:" for="dta_nascimento"/>
						<p:calendar id="dta_nascimento" value="#{loginBean.usuario.dataNascimento}" pattern="dd/MM/yyyy" navigator="true" locale="pt"/>
						
						<p:outputLabel value="Celular:" for="celular"/>
						<p:inputMask validatorMessage="Celular do usuário deve estar no padrão (99) 99999-9999!" value="#{loginBean.usuario.celular}" id="celular" mask="(99) 99999-9999">
							<f:validateRegex pattern="^(\([0-9]{2}\))\s([9]{1})?([0-9]{4})-([0-9]{4})$"/>
						</p:inputMask>
						
					</h:panelGrid>
					
					<div class="botao">
						<p:commandButton type="buttom" onclick="PF('editar_user').hide();" styleClass="btn02" value="Cancelar"/>
						<p:commandButton styleClass="btn03" update="@form :panel-dados" action="#{cadastroBean.altera}" value="Alterar"/>
					</div>
				</h:form>
				
			</p:dialog>
			
			<!-- Modal Editar Imagem -->
			<p:dialog resizable="false" header="Alterar Imagem" widgetVar="editar_imagem" modal="true" width="800" height="300">
			
			<h:form id="form-imagem">
			<p:growl id="messages" showDetail="true" />
			<h:panelGrid style="width:100%;" columns="2" rules="groups" columnClasses="pr30, pr70" align="center">
				<p:outputLabel value="Imagem Atual" />
				<p:outputLabel value="Selecione nova imagem!" />
				<p:graphicImage name="#{loginBean.usuario.imagem}" library="imagens/usuarios" width="100" height="100" />
    			<p:fileUpload label="Escolha a Imagem" fileUploadListener="#{fileBean.usuario}" mode="advanced" update="@form messages :panel-dados :perfil" auto="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
    		</h:panelGrid>
 			</h:form>
 			
			</p:dialog>
			
		</p:outputPanel>
		</ui:define>

	</ui:composition>

</h:body>
</html>